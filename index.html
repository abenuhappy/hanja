<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•œì í•™ìŠµ ê²Œì„ - Essential Hanja Learning</title>
    <style>
        :root {
            --primary: #5d4037;
            --primary-light: #8d6e63;
            --secondary: #fdf5e6;
            --accent: #d4a373;
            --correct: #2e7d32;
            --wrong: #c62828;
            --text: #3e2723;
            --bg: #fafafa;
            --card-bg: #ffffff;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: var(--primary);
            color: white;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: var(--shadow);
        }

        header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 0.05em;
        }

        main {
            flex: 1;
            max-width: 600px;
            margin: 0 auto;
            padding: 2rem 1rem;
            width: 100%;
        }

        .screen {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Home Screen */
        .card {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            border: 1px solid #eee;
            margin-bottom: 2rem;
        }

        .instruction {
            font-size: 1.1rem;
            text-align: center;
            margin-bottom: 2rem;
            color: var(--primary-light);
        }

        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .btn {
            background-color: var(--secondary);
            border: 2px solid var(--accent);
            color: var(--text);
            padding: 1rem;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .btn:hover {
            background-color: var(--accent);
            color: white;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
            border: none;
        }

        .btn-primary:hover {
            background-color: var(--primary-light);
        }

        /* Level Selection */
        .level-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.75rem;
        }

        /* Quiz Area */
        .progress-container {
            width: 100%;
            height: 8px;
            background-color: #eee;
            border-radius: 4px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--accent);
            width: 0%;
            transition: width 0.3s;
        }

        .question-header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .question-type {
            font-size: 0.9rem;
            color: var(--primary-light);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            font-weight: bold;
        }

        .question-text {
            font-size: 4rem;
            font-weight: 700;
            margin: 1rem 0;
        }

        .question-hint {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
        }

        .choice-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .choice-btn {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 1.25rem;
            border-radius: 12px;
            font-size: 1.2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .choice-btn:hover {
            border-color: var(--accent);
            background-color: var(--secondary);
        }

        .choice-btn.correct {
            background-color: var(--correct) !important;
            color: white !important;
            border-color: var(--correct) !important;
        }

        .choice-btn.wrong {
            background-color: var(--wrong) !important;
            color: white !important;
            border-color: var(--wrong) !important;
        }

        /* Feedback Area */
        #feedback-area {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1.5rem;
            background: white;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
            z-index: 100;
        }

        #feedback-area.active {
            transform: translateY(0);
        }

        .feedback-content {
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .feedback-msg {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .feedback-explanation {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.25rem;
        }

        /* Result Screen */
        .result-score {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
            text-align: center;
            margin: 1rem 0;
        }

        .stat-group {
            display: flex;
            justify-content: space-around;
            margin-bottom: 2rem;
            padding: 1rem;
            background: var(--secondary);
            border-radius: 8px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #666;
        }

        .stat-value {
            font-weight: 700;
            font-size: 1.2rem;
        }

        .weakness-list {
            margin-top: 1.5rem;
        }

        .weakness-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem;
            border-bottom: 1px solid #eee;
        }

        .weakness-item:last-child {
            border-bottom: none;
        }

        .hanja-large {
            font-size: 1.2rem;
            font-weight: bold;
        }

        @media (min-width: 768px) {
            .level-grid {
                grid-template-columns: 1fr 1fr;
            }

            .choice-grid {
                grid-template-columns: 1fr 1fr;
            }

            header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>

<body>

    <header>
        <h1>í•œì í•™ìŠµ ê²Œì„</h1>
    </header>

    <main>
        <!-- Home Screen -->
        <section id="home-screen" class="screen active">
            <div class="card">
                <p class="instruction">í•™ìŠµí•  ê¸‰ìˆ˜ë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>
                <div class="btn-group">
                    <button class="btn" onclick="selectCourse('8ê¸‰')">8ê¸‰ ê³¼ì •</button>
                    <button class="btn" onclick="selectCourse('7ê¸‰')">7ê¸‰ ê³¼ì •</button>
                    <button class="btn" onclick="selectCourse('6ê¸‰')">6ê¸‰ ê³¼ì •</button>
                </div>
            </div>
        </section>

        <!-- Level Screen -->
        <section id="level-screen" class="screen">
            <div class="card">
                <p class="instruction" id="level-title">êµ¬ê°„ì„ ì„ íƒí•˜ì„¸ìš”.</p>
                <div class="level-grid" id="level-grid">
                    <!-- Dynamic level buttons -->
                </div>
                <button class="btn" style="border:none; color: #666; margin-top: 1rem; width: 100%;"
                    onclick="showScreen('home-screen')">â† ê¸‰ìˆ˜ ë³€ê²½</button>
            </div>
        </section>

        <!-- Quiz Screen -->
        <section id="quiz-screen" class="screen">
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>

            <div class="question-header">
                <div id="question-type" class="question-type">TYPE A</div>
                <div id="question-content">
                    <!-- Dynamic question content -->
                </div>
            </div>

            <div class="choice-grid" id="choice-grid">
                <!-- Dynamic choices -->
            </div>
        </section>

        <!-- Result Screen -->
        <section id="result-screen" class="screen">
            <div class="card">
                <h2 style="text-align: center;">í•™ìŠµ ê²°ê³¼</h2>
                <div class="result-score" id="result-score">0 / 10</div>

                <div class="stat-group">
                    <div class="stat-item">
                        <div class="stat-label">ì •ë‹µë¥ </div>
                        <div class="stat-value" id="stat-accuracy">0%</div>
                    </div>
                </div>

                <div id="weakness-section" class="weakness-list">
                    <h3 style="font-size: 1rem; margin-bottom: 0.5rem; color: var(--wrong);">ë³µìŠµì´ í•„ìš”í•œ í•œì</h3>
                    <div id="weakness-list">
                        <!-- Dynamic wrong answers -->
                    </div>
                </div>

                <div class="btn-group" style="margin-top: 2rem;">
                    <button class="btn btn-primary" onclick="restartQuiz()">ë‹¤ì‹œ ì‹œì‘</button>
                    <button class="btn" onclick="showScreen('home-screen')">í™ˆìœ¼ë¡œ</button>
                </div>
            </div>
        </section>
    </main>

    <div id="feedback-area">
        <div class="feedback-content">
            <div>
                <div id="feedback-status" class="feedback-msg">ì •ë‹µì…ë‹ˆë‹¤!</div>
                <div id="feedback-explanation" class="feedback-explanation">å¤§: í´ ëŒ€</div>
            </div>
            <button class="btn btn-primary" style="padding: 0.5rem 1.5rem;" onclick="nextQuestion()">ë‹¤ìŒ</button>
        </div>
    </div>

    <script>
        const HANJA_DATA = {"8ê¸‰": [{"hanja": "ä¸€", "meaning": "í•œ", "sound": "ì¼"}, {"hanja": "äºŒ", "meaning": "ë‘", "sound": "ì´"}, {"hanja": "ä¸‰", "meaning": "ì„", "sound": "ì‚¼"}, {"hanja": "å››", "meaning": "ë„‰", "sound": "ì‚¬"}, {"hanja": "äº”", "meaning": "ë‹¤ì„¯", "sound": "ì˜¤"}, {"hanja": "å…­", "meaning": "ì—¬ì„¯", "sound": "ìœ¡"}, {"hanja": "ä¸ƒ", "meaning": "ì¼ê³±", "sound": "ì¹ "}, {"hanja": "å…«", "meaning": "ì—¬ëŸ", "sound": "íŒ”"}, {"hanja": "ä¹", "meaning": "ì•„í™‰", "sound": "êµ¬"}, {"hanja": "å", "meaning": "ì—´", "sound": "ì‹­"}, {"hanja": "æ—¥", "meaning": "ë‚ ", "sound": "ì¼"}, {"hanja": "æœˆ", "meaning": "ë‹¬", "sound": "ì›”"}, {"hanja": "ç«", "meaning": "ë¶ˆ", "sound": "í™”"}, {"hanja": "æ°´", "meaning": "ë¬¼", "sound": "ìˆ˜"}, {"hanja": "æœ¨", "meaning": "ë‚˜ë¬´", "sound": "ëª©"}, {"hanja": "é‡‘", "meaning": "ì‡ ", "sound": "ê¸ˆ"}, {"hanja": "åœŸ", "meaning": "í™", "sound": "í† "}, {"hanja": "å±±", "meaning": "ë«¼", "sound": "ì‚°"}, {"hanja": "æ±Ÿ", "meaning": "ê°€ëŒ", "sound": "ê°•"}, {"hanja": "æ±", "meaning": "ë™ë…˜", "sound": "ë™"}, {"hanja": "è¥¿", "meaning": "ì„œë…˜", "sound": "ì„œ"}, {"hanja": "å—", "meaning": "ë‚¨ë…˜", "sound": "ë‚¨"}, {"hanja": "åŒ—", "meaning": "ë¶ë…˜", "sound": "ë¶"}, {"hanja": "å¤§", "meaning": "í°", "sound": "ëŒ€"}, {"hanja": "ä¸­", "meaning": "ê°€ìš´ë°", "sound": "ì¤‘"}, {"hanja": "å°", "meaning": "ì‘ì„", "sound": "ì†Œ"}, {"hanja": "çˆ¶", "meaning": "ì•„ë¹„", "sound": "ë¶€"}, {"hanja": "æ¯", "meaning": "ì–´ë¯¸", "sound": "ëª¨"}, {"hanja": "å…„", "meaning": "í˜•", "sound": "í˜•"}, {"hanja": "å¼Ÿ", "meaning": "ì•„ìš°", "sound": "ì œ"}, {"hanja": "å¥³", "meaning": "ê³„ì§‘", "sound": "ë…€"}, {"hanja": "å­", "meaning": "ì•„ë“¤", "sound": "ì"}, {"hanja": "å­¸", "meaning": "ë°°ìš¸", "sound": "í•™"}, {"hanja": "æ ¡", "meaning": "í•™êµ", "sound": "êµ"}, {"hanja": "å…ˆ", "meaning": "ë¨¼ì €", "sound": "ì„ "}, {"hanja": "ç”Ÿ", "meaning": "ë‚ ", "sound": "ìƒ"}, {"hanja": "æ•", "meaning": "ê°€ë¥´ì¹ ", "sound": "êµ"}, {"hanja": "å®¤", "meaning": "ì§‘", "sound": "ì‹¤"}, {"hanja": "äºº", "meaning": "ì‚¬ëŒ", "sound": "ì¸"}], "7ê¸‰": [{"hanja": "æ°‘", "meaning": "ë°±ì„±", "sound": "ë¯¼"}, {"hanja": "è»", "meaning": "êµ°ì‚¬", "sound": "êµ°"}, {"hanja": "æ‰‹", "meaning": "ì†", "sound": "ìˆ˜"}, {"hanja": "è¶³", "meaning": "ë°œ", "sound": "ì¡±"}, {"hanja": "ç›®", "meaning": "ëˆˆ", "sound": "ëª©"}, {"hanja": "è€³", "meaning": "ê·€", "sound": "ì´"}, {"hanja": "å£", "meaning": "ì…", "sound": "êµ¬"}, {"hanja": "å¿ƒ", "meaning": "ë§ˆìŒ", "sound": "ì‹¬"}, {"hanja": "çŠ¬", "meaning": "ê°œ", "sound": "ê²¬"}, {"hanja": "ç‰›", "meaning": "ì†Œ", "sound": "ìš°"}, {"hanja": "é¦¬", "meaning": "ë§", "sound": "ë§ˆ"}, {"hanja": "è‰", "meaning": "í’€", "sound": "ì´ˆ"}, {"hanja": "èŠ±", "meaning": "ê½ƒ", "sound": "í™”"}, {"hanja": "é£Ÿ", "meaning": "ë¨¹ì„", "sound": "ì‹"}, {"hanja": "ä½", "meaning": "ì‚´", "sound": "ì£¼"}, {"hanja": "è¡£", "meaning": "ì˜·", "sound": "ì˜"}, {"hanja": "è»Š", "meaning": "ìˆ˜ë ˆ", "sound": "ì°¨"}, {"hanja": "å¸‚", "meaning": "ì €ì", "sound": "ì‹œ"}, {"hanja": "åº—", "meaning": "ê°€ê²Œ", "sound": "ì "}, {"hanja": "æ´", "meaning": "ë§ˆì„", "sound": "ë™"}, {"hanja": "å¹´", "meaning": "í•´", "sound": "ë…„"}, {"hanja": "æ˜¥", "meaning": "ë´„", "sound": "ì¶˜"}, {"hanja": "å¤", "meaning": "ì—¬ë¦„", "sound": "í•˜"}, {"hanja": "ç§‹", "meaning": "ê°€ì„", "sound": "ì¶”"}, {"hanja": "å†¬", "meaning": "ê²¨ìš¸", "sound": "ë™"}, {"hanja": "ç‹", "meaning": "ì„ê¸ˆ", "sound": "ì™•"}, {"hanja": "å¤«", "meaning": "ì§€ì•„ë¹„", "sound": "ë¶€"}, {"hanja": "å©¦", "meaning": "ë©°ëŠë¦¬", "sound": "ë¶€"}, {"hanja": "ï¤´", "meaning": "ëŠ™ì„", "sound": "ë…¸"}, {"hanja": "å°‘", "meaning": "ì ì„", "sound": "ì†Œ"}, {"hanja": "é•·", "meaning": "ê¸¸", "sound": "ì¥"}, {"hanja": "æ–¹", "meaning": "ëª¨", "sound": "ë°©"}, {"hanja": "é‡Œ", "meaning": "ë§ˆì„", "sound": "ë¦¬"}, {"hanja": "å¤–", "meaning": "ë°”ê¹¥", "sound": "ì™¸"}, {"hanja": "å…§", "meaning": "ì•ˆ", "sound": "ë‚´"}, {"hanja": "é–“", "meaning": "ì‚¬ì´", "sound": "ê°„"}, {"hanja": "å‰", "meaning": "ì•", "sound": "ì „"}, {"hanja": "å¾Œ", "meaning": "ë’¤", "sound": "í›„"}, {"hanja": "åˆ", "meaning": "ë‚®", "sound": "ì˜¤"}, {"hanja": "æ™‚", "meaning": "ë•Œ", "sound": "ì‹œ"}, {"hanja": "å¹³", "meaning": "í‰í‰í• ", "sound": "í‰"}, {"hanja": "å®‰", "meaning": "í¸ì•ˆ", "sound": "ì•ˆ"}, {"hanja": "æ´»", "meaning": "ì‚´", "sound": "í™œ"}, {"hanja": "å·¥", "meaning": "ì¥ì¸", "sound": "ê³µ"}, {"hanja": "åŠ›", "meaning": "í˜", "sound": "ë ¥"}, {"hanja": "ç™¾", "meaning": "ì¼ë°±", "sound": "ë°±"}, {"hanja": "åƒ", "meaning": "ì¼ì²œ", "sound": "ì²œ"}], "6ê¸‰": [{"hanja": "è¨˜", "meaning": "ê¸°ë¡í• ", "sound": "ê¸°"}, {"hanja": "ç­”", "meaning": "ëŒ€ë‹µí• ", "sound": "ë‹µ"}, {"hanja": "å•", "meaning": "ë¬¼ì„", "sound": "ë¬¸"}, {"hanja": "é¡Œ", "meaning": "ì œëª©", "sound": "ì œ"}, {"hanja": "ç­†", "meaning": "ë¶“", "sound": "í•„"}, {"hanja": "ç•«", "meaning": "ê·¸ë¦¼", "sound": "í™”"}, {"hanja": "è¬›", "meaning": "ìµí", "sound": "ê°•"}, {"hanja": "å…‰", "meaning": "ë¹›", "sound": "ê´‘"}, {"hanja": "é›»", "meaning": "ë²ˆê°œ", "sound": "ì „"}, {"hanja": "åœ°", "meaning": "ë•…", "sound": "ì§€"}, {"hanja": "å¤©", "meaning": "í•˜ëŠ˜", "sound": "ì²œ"}, {"hanja": "æµ·", "meaning": "ë°”ë‹¤", "sound": "í•´"}, {"hanja": "ç©º", "meaning": "ë¹Œ", "sound": "ê³µ"}, {"hanja": "ç‰©", "meaning": "ë¬¼ê±´", "sound": "ë¬¼"}, {"hanja": "è¡Œ", "meaning": "ë‹¤ë‹", "sound": "í–‰"}, {"hanja": "æ­¢", "meaning": "ê·¸ì¹ ", "sound": "ì§€"}, {"hanja": "å‹•", "meaning": "ì›€ì§ì¼", "sound": "ë™"}, {"hanja": "ç”¨", "meaning": "ì“¸", "sound": "ìš©"}, {"hanja": "è¦‹", "meaning": "ë³¼", "sound": "ê²¬"}, {"hanja": "è", "meaning": "ë“¤ì„", "sound": "ë¬¸"}, {"hanja": "è®€", "meaning": "ì½ì„", "sound": "ë…"}, {"hanja": "æ­Œ", "meaning": "ë…¸ë˜", "sound": "ê°€"}, {"hanja": "æ„Ÿ", "meaning": "ëŠë‚„", "sound": "ê°"}, {"hanja": "å¼º", "meaning": "ê°•í• ", "sound": "ê°•"}, {"hanja": "é–‹", "meaning": "ì—´", "sound": "ê°œ"}, {"hanja": "äº¬", "meaning": "ì„œìš¸", "sound": "ê²½"}, {"hanja": "ç•Œ", "meaning": "ì§€ê²½", "sound": "ê³„"}, {"hanja": "è¨ˆ", "meaning": "ì…€", "sound": "ê³„"}, {"hanja": "è€ƒ", "meaning": "ìƒê°í• ", "sound": "ê³ "}, {"hanja": "è‹¦", "meaning": "ì“¸", "sound": "ê³ "}, {"hanja": "é«˜", "meaning": "ë†’ì„", "sound": "ê³ "}, {"hanja": "å…¬", "meaning": "ê³µí‰í• ", "sound": "ê³µ"}, {"hanja": "å…±", "meaning": "í•œê°€ì§€", "sound": "ê³µ"}, {"hanja": "ç§‘", "meaning": "ê³¼ëª©", "sound": "ê³¼"}, {"hanja": "æœ", "meaning": "ì—´ë§¤", "sound": "ê³¼"}, {"hanja": "é", "meaning": "ì§€ë‚ ", "sound": "ê³¼"}, {"hanja": "å…‰", "meaning": "ë¹›", "sound": "ê´‘"}, {"hanja": "äº¤", "meaning": "ì‚¬ê·ˆ", "sound": "êµ"}, {"hanja": "å€", "meaning": "êµ¬ì—­", "sound": "êµ¬"}, {"hanja": "çƒ", "meaning": "ê³µ", "sound": "êµ¬"}, {"hanja": "éƒ¡", "meaning": "ê³ ì„", "sound": "êµ°"}, {"hanja": "æ ¹", "meaning": "ë¿Œë¦¬", "sound": "ê·¼"}, {"hanja": "è¿‘", "meaning": "ê°€ê¹Œìš¸", "sound": "ê·¼"}, {"hanja": "ä»Š", "meaning": "ì´ì œ", "sound": "ê¸ˆ"}, {"hanja": "æ€¥", "meaning": "ê¸‰í• ", "sound": "ê¸‰"}, {"hanja": "ç´š", "meaning": "ë“±ê¸‰", "sound": "ê¸‰"}, {"hanja": "å¤š", "meaning": "ë§ì„", "sound": "ë‹¤"}, {"hanja": "çŸ­", "meaning": "ì§§ì„", "sound": "ë‹¨"}, {"hanja": "ç•¶", "meaning": "ë§ˆë•…", "sound": "ë‹¹"}, {"hanja": "ä»£", "meaning": "ëŒ€ì‹ í• ", "sound": "ëŒ€"}, {"hanja": "å°", "meaning": "ëŒ€ë‹µí• ", "sound": "ëŒ€"}, {"hanja": "åº¦", "meaning": "ë²•ë„", "sound": "ë„"}, {"hanja": "é“", "meaning": "ê¸¸", "sound": "ë„"}, {"hanja": "é‡Œ", "meaning": "ë§ˆì„", "sound": "ë¦¬"}, {"hanja": "ç†", "meaning": "ë‹¤ìŠ¤ë¦´", "sound": "ë¦¬"}, {"hanja": "æ—", "meaning": "ìˆ˜í’€", "sound": "ë¦¼"}, {"hanja": "ä¾‹", "meaning": "ë²•ì‹", "sound": "ë¡€"}, {"hanja": "ç¦®", "meaning": "ì˜ˆë„", "sound": "ë¡€"}, {"hanja": "è·¯", "meaning": "ê¸¸", "sound": "ë¡œ"}, {"hanja": "é¢", "meaning": "ë‚¯", "sound": "ë©´"}, {"hanja": "å‘½", "meaning": "ëª©ìˆ¨", "sound": "ëª…"}, {"hanja": "æ˜", "meaning": "ë°ì„", "sound": "ëª…"}, {"hanja": "æ”¾", "meaning": "ë†“ì„", "sound": "ë°©"}, {"hanja": "å€", "meaning": "ê³±", "sound": "ë°°"}, {"hanja": "ç•ª", "meaning": "ì°¨ë¡€", "sound": "ë²ˆ"}, {"hanja": "åˆ¥", "meaning": "ë‚˜ëˆŒ", "sound": "ë³„"}, {"hanja": "ç—…", "meaning": "ë³‘", "sound": "ë³‘"}, {"hanja": "æ­¥", "meaning": "ê±¸ìŒ", "sound": "ë³´"}, {"hanja": "æœ", "meaning": "ì˜·", "sound": "ë³µ"}, {"hanja": "ç¦", "meaning": "ë³µ", "sound": "ë³µ"}, {"hanja": "æœ¬", "meaning": "ê·¼ë³¸", "sound": "ë³¸"}, {"hanja": "éƒ¨", "meaning": "ë–¼", "sound": "ë¶€"}, {"hanja": "äº‹", "meaning": "ì¼", "sound": "ì‚¬"}, {"hanja": "ä½¿", "meaning": "ë¶€ë¦´", "sound": "ì‚¬"}, {"hanja": "ç¤¾", "meaning": "ëª¨ì„", "sound": "ì‚¬"}, {"hanja": "èˆ", "meaning": "ì§‘", "sound": "ì‚¬"}, {"hanja": "ç®—", "meaning": "ì…ˆ", "sound": "ì‚°"}, {"hanja": "è‰²", "meaning": "ë¹›ê¹”", "sound": "ìƒ‰"}, {"hanja": "å¸­", "meaning": "ìë¦¬", "sound": "ì„"}, {"hanja": "çŸ³", "meaning": "ëŒ", "sound": "ì„"}, {"hanja": "ç·š", "meaning": "ì¤„", "sound": "ì„ "}, {"hanja": "é›ª", "meaning": "ëˆˆ", "sound": "ì„¤"}, {"hanja": "æˆ", "meaning": "ì´ë£°", "sound": "ì„±"}, {"hanja": "çœ", "meaning": "ì‚´í•„", "sound": "ì„±"}, {"hanja": "æ€§", "meaning": "ì„±í’ˆ", "sound": "ì„±"}, {"hanja": "ä¸–", "meaning": "ëŒ€", "sound": "ì„¸"}, {"hanja": "æ‰€", "meaning": "ë°”", "sound": "ì†Œ"}, {"hanja": "é€Ÿ", "meaning": "ë¹ ë¥¼", "sound": "ì†"}, {"hanja": "æ•¸", "meaning": "ì…€", "sound": "ìˆ˜"}, {"hanja": "ç¿’", "meaning": "ìµí", "sound": "ìŠµ"}, {"hanja": "å‹", "meaning": "ì´ê¸¸", "sound": "ìŠ¹"}, {"hanja": "å§‹", "meaning": "ì²˜ìŒ", "sound": "ì‹œ"}, {"hanja": "æ¤", "meaning": "ì‹¬ì„", "sound": "ì‹"}, {"hanja": "èº«", "meaning": "ëª¸", "sound": "ì‹ "}, {"hanja": "ç¥", "meaning": "ê·€ì‹ ", "sound": "ì‹ "}, {"hanja": "æ–°", "meaning": "ìƒˆ", "sound": "ì‹ "}, {"hanja": "å¤±", "meaning": "ìƒì„", "sound": "ì‹¤"}, {"hanja": "å¿ƒ", "meaning": "ë§ˆìŒ", "sound": "ì‹¬"}, {"hanja": "æ„›", "meaning": "ì‚¬ë‘", "sound": "ì• "}, {"hanja": "å¤œ", "meaning": "ë°¤", "sound": "ì•¼"}, {"hanja": "é‡", "meaning": "ë“¤", "sound": "ì•¼"}, {"hanja": "å¼±", "meaning": "ì•½í• ", "sound": "ì•½"}, {"hanja": "æ´‹", "meaning": "í°ë°”ë‹¤", "sound": "ì–‘"}, {"hanja": "é™½", "meaning": "ë³•", "sound": "ì–‘"}, {"hanja": "èª", "meaning": "ë§ì”€", "sound": "ì–´"}, {"hanja": "æ¥­", "meaning": "ì—…", "sound": "ì—…"}, {"hanja": "æº«", "meaning": "ë”°ëœ»í• ", "sound": "ì˜¨"}, {"hanja": "éŸ³", "meaning": "ì†Œë¦¬", "sound": "ìŒ"}, {"hanja": "æ„", "meaning": "ëœ»", "sound": "ì˜"}, {"hanja": "é†«", "meaning": "ì˜ì›", "sound": "ì˜"}, {"hanja": "è€…", "meaning": "ë†ˆ", "sound": "ì"}, {"hanja": "è‡ª", "meaning": "ìŠ¤ìŠ¤ë¡œ", "sound": "ì"}, {"hanja": "ä½œ", "meaning": "ì§€ì„", "sound": "ì‘"}, {"hanja": "å ´", "meaning": "ë§ˆë‹¹", "sound": "ì¥"}, {"hanja": "æ‰", "meaning": "ì¬ì£¼", "sound": "ì¬"}, {"hanja": "å…¨", "meaning": "ì˜¨ì „í• ", "sound": "ì „"}, {"hanja": "æˆ°", "meaning": "ì‹¸ì›€", "sound": "ì „"}, {"hanja": "æ­£", "meaning": "ë°”ë¥¼", "sound": "ì •"}, {"hanja": "å®š", "meaning": "ì •í• ", "sound": "ì •"}, {"hanja": "é‡", "meaning": "ë¬´ê±°ìš¸", "sound": "ì¤‘"}, {"hanja": "ç´™", "meaning": "ì¢…ì´", "sound": "ì§€"}, {"hanja": "ç›´", "meaning": "ê³§ì„", "sound": "ì§"}, {"hanja": "é›†", "meaning": "ëª¨ì„", "sound": "ì§‘"}, {"hanja": "é«”", "meaning": "ëª¸", "sound": "ì²´"}, {"hanja": "è¦ª", "meaning": "ì¹œí• ", "sound": "ì¹œ"}, {"hanja": "å¤ª", "meaning": "í´", "sound": "íƒœ"}, {"hanja": "é€š", "meaning": "í†µí• ", "sound": "í†µ"}, {"hanja": "ç‰¹", "meaning": "íŠ¹ë³„í• ", "sound": "íŠ¹"}, {"hanja": "è¡¨", "meaning": "ê²‰", "sound": "í‘œ"}, {"hanja": "é¢¨", "meaning": "ë°”ëŒ", "sound": "í’"}, {"hanja": "åˆ", "meaning": "í•©í• ", "sound": "í•©"}, {"hanja": "å½¢", "meaning": "ëª¨ì–‘", "sound": "í˜•"}, {"hanja": "è™Ÿ", "meaning": "ì´ë¦„", "sound": "í˜¸"}, {"hanja": "æ´»", "meaning": "ì‚´", "sound": "í™œ"}, {"hanja": "å­", "meaning": "íš¨ë„", "sound": "íš¨"}, {"hanja": "è¨“", "meaning": "ê°€ë¥´ì¹ ", "sound": "í›ˆ"}, {"hanja": "ä¼‘", "meaning": "ì‰´", "sound": "íœ´"}, {"hanja": "å…„", "meaning": "í˜•", "sound": "í˜•"}, {"hanja": "é‘", "meaning": "í‘¸ë¥¼", "sound": "ì²­"}, {"hanja": "å„", "meaning": "ê°ê°", "sound": "ê°"}, {"hanja": "æ„Ÿ", "meaning": "ëŠë‚„", "sound": "ê°"}, {"hanja": "å¼º", "meaning": "ê°•í• ", "sound": "ê°•"}, {"hanja": "é–‹", "meaning": "ì—´", "sound": "ê°œ"}, {"hanja": "çµ", "meaning": "ë§ºì„", "sound": "ê²°"}, {"hanja": "è¼•", "meaning": "ê°€ë²¼ìš¸", "sound": "ê²½"}, {"hanja": "åºš", "meaning": "ë³„", "sound": "ê²½"}, {"hanja": "ä¿‚", "meaning": "ê±¸ë¦´", "sound": "ê³„"}, {"hanja": "å¤", "meaning": "ì˜›", "sound": "ê³ "}, {"hanja": "æ›²", "meaning": "êµ½ì„", "sound": "ê³¡"}, {"hanja": "å…±", "meaning": "í•œê°€ì§€", "sound": "ê³µ"}, {"hanja": "åŠŸ", "meaning": "ê³µ", "sound": "ê³µ"}, {"hanja": "æœ", "meaning": "ì—´ë§¤", "sound": "ê³¼"}, {"hanja": "å®˜", "meaning": "ë²¼ìŠ¬", "sound": "ê´€"}, {"hanja": "è§€", "meaning": "ë³¼", "sound": "ê´€"}, {"hanja": "å»£", "meaning": "ë„“ì„", "sound": "ê´‘"}, {"hanja": "æ±‚", "meaning": "êµ¬í• ", "sound": "êµ¬"}, {"hanja": "å€", "meaning": "êµ¬ì—­", "sound": "êµ¬"}, {"hanja": "åœ‹", "meaning": "ë‚˜ë¼", "sound": "êµ­"}, {"hanja": "å™¨", "meaning": "ê·¸ë¦‡", "sound": "ê¸°"}, {"hanja": "æ——", "meaning": "ê¸°", "sound": "ê¸°"}, {"hanja": "æ°£", "meaning": "ê¸°ìš´", "sound": "ê¸°"}, {"hanja": "è¾²", "meaning": "ë†ì‚¬", "sound": "ë†"}, {"hanja": "å–®", "meaning": "í™‘", "sound": "ë‹¨"}, {"hanja": "ç­”", "meaning": "ëŒ€ë‹µí• ", "sound": "ë‹µ"}, {"hanja": "åœ–", "meaning": "ê·¸ë¦¼", "sound": "ë„"}, {"hanja": "è®€", "meaning": "ì½ì„", "sound": "ë…"}, {"hanja": "åŒ", "meaning": "í•œê°€ì§€", "sound": "ë™"}, {"hanja": "ç«¥", "meaning": "ì•„ì´", "sound": "ë™"}, {"hanja": "é ­", "meaning": "ë¨¸ë¦¬", "sound": "ë‘"}, {"hanja": "ç™»", "meaning": "ì˜¤ë¥¼", "sound": "ë“±"}, {"hanja": "ï¥œ", "meaning": "ì¦ê±°ìš¸", "sound": "ë½"}, {"hanja": "ä¾‹", "meaning": "ë²•ì‹", "sound": "ë¡€"}, {"hanja": "ç¦®", "meaning": "ì˜ˆë„", "sound": "ë¡€"}, {"hanja": "å‹", "meaning": "ì¼í• ", "sound": "ë¡œ"}, {"hanja": "æµ", "meaning": "íë¥¼", "sound": "ë¥˜"}, {"hanja": "é‡Œ", "meaning": "ë§ˆì„", "sound": "ë¦¬"}, {"hanja": "ç†", "meaning": "ë‹¤ìŠ¤ë¦´", "sound": "ë¦¬"}, {"hanja": "æ—", "meaning": "ìˆ˜í’€", "sound": "ë¦¼"}, {"hanja": "ç«‹", "meaning": "ì„¤", "sound": "ë¦½"}, {"hanja": "è³£", "meaning": "íŒ”", "sound": "ë§¤"}, {"hanja": "è²·", "meaning": "ì‚´", "sound": "ë§¤"}, {"hanja": "æ¯", "meaning": "ë§¤ì–‘", "sound": "ë§¤"}, {"hanja": "ç„¡", "meaning": "ì—†ì„", "sound": "ë¬´"}, {"hanja": "å•", "meaning": "ë¬¼ì„", "sound": "ë¬¸"}, {"hanja": "æ–‡", "meaning": "ê¸€ì›”", "sound": "ë¬¸"}, {"hanja": "ç‰©", "meaning": "ë¬¼ê±´", "sound": "ë¬¼"}, {"hanja": "æ–¹", "meaning": "ëª¨", "sound": "ë°©"}, {"hanja": "åŠ", "meaning": "ë°˜", "sound": "ë°˜"}, {"hanja": "ç™¼", "meaning": "í•„", "sound": "ë°œ"}, {"hanja": "ç™½", "meaning": "í°", "sound": "ë°±"}, {"hanja": "æ³•", "meaning": "ë²•", "sound": "ë²•"}, {"hanja": "åˆ¥", "meaning": "ë‚˜ëˆŒ", "sound": "ë³„"}, {"hanja": "å…µ", "meaning": "ë³‘ì‚¬", "sound": "ë³‘"}, {"hanja": "æœ", "meaning": "ì˜·", "sound": "ë³µ"}, {"hanja": "åˆ†", "meaning": "ë‚˜ëˆŒ", "sound": "ë¶„"}, {"hanja": "ä¸", "meaning": "ì•„ë‹ˆ", "sound": "ë¶ˆ"}, {"hanja": "å‚™", "meaning": "ê°–ì¶œ", "sound": "ë¹„"}, {"hanja": "æ¯”", "meaning": "ê²¬ì¤„", "sound": "ë¹„"}, {"hanja": "é¼»", "meaning": "ì½”", "sound": "ë¹„"}, {"hanja": "æ°·", "meaning": "ì–¼ìŒ", "sound": "ë¹™"}, {"hanja": "æ€", "meaning": "ìƒê°", "sound": "ì‚¬"}, {"hanja": "æ­»", "meaning": "ì£½ì„", "sound": "ì‚¬"}, {"hanja": "ç”£", "meaning": "ë‚³ì„", "sound": "ì‚°"}, {"hanja": "å•†", "meaning": "ì¥ì‚¬", "sound": "ìƒ"}, {"hanja": "ä¸Š", "meaning": "ìœ—", "sound": "ìƒ"}, {"hanja": "ç›¸", "meaning": "ì„œë¡œ", "sound": "ìƒ"}, {"hanja": "ç‹€", "meaning": "í˜•ìƒ", "sound": "ìƒ"}]};

        // UI State
        let currentCourse = null;
        let pool = [];
        let currentSession = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let wrongAnswers = [];
        let isAnswered = false;

        async function loadHanjaData() {
            try {
                const response = await fetch('hanja_data.json');
                const data = await response.json();
                Object.assign(HANJA_DATA, data);
            } catch (e) {
                console.warn("Could not load hanja_data.json.");
            }
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            document.getElementById('feedback-area').classList.remove('active');
        }

        function selectCourse(course) {
            currentCourse = course;
            const data = HANJA_DATA[course];
            const title = `${course} ê³¼ì • (${data.length}ì)`;
            document.getElementById('level-title').innerText = title + ' - êµ¬ê°„ ì„ íƒ';

            const grid = document.getElementById('level-grid');
            grid.innerHTML = '';

            const step = 100;
            if (data.length <= step) {
                const btn = document.createElement('button');
                btn.className = 'btn btn-primary';
                btn.style.gridColumn = '1 / -1';
                btn.innerText = 'í•™ìŠµ ì‹œì‘';
                btn.onclick = () => startQuiz(0, data.length);
                grid.appendChild(btn);
            } else {
                for (let i = 0; i < data.length; i += step) {
                    const end = Math.min(i + step, data.length);
                    const btn = document.createElement('button');
                    btn.className = 'btn';
                    btn.innerText = `Level ${Math.floor(i / step) + 1} (${i + 1}â€“${end})`;
                    btn.onclick = () => startQuiz(i, end);
                    grid.appendChild(btn);
                }
                const allBtn = document.createElement('button');
                allBtn.className = 'btn btn-primary';
                allBtn.style.gridColumn = '1 / -1';
                allBtn.innerText = 'ì „ì²´ ë²”ìœ„ ë¬´ì‘ìœ„';
                allBtn.onclick = () => startQuiz(0, data.length);
                grid.appendChild(allBtn);
            }

            showScreen('level-screen');
        }

        function startQuiz(start, end) {
            const data = HANJA_DATA[currentCourse];
            if (!data || data.length === 0) {
                alert("ë°ì´í„°ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
                return;
            }

            const available = data.slice(start, end);
            pool = available;

            currentSession = [...available].sort(() => 0.5 - Math.random());
            currentQuestionIndex = 0;
            score = 0;
            wrongAnswers = [];

            showScreen('quiz-screen');
            renderQuestion();
        }

        function renderQuestion() {
            isAnswered = false;
            const item = currentSession[currentQuestionIndex];
            const isTypeA = Math.random() > 0.5;

            const progress = ((currentQuestionIndex) / currentSession.length) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';

            const typeLabel = document.getElementById('question-type');
            const content = document.getElementById('question-content');
            const choiceGrid = document.getElementById('choice-grid');

            choiceGrid.innerHTML = '';

            const distractors = pool.filter(h => h.hanja !== item.hanja)
                .sort(() => 0.5 - Math.random())
                .slice(0, 3);

            const choices = [...distractors, item].sort(() => 0.5 - Math.random());

            if (isTypeA) {
                typeLabel.innerText = "í•œìë¥¼ ë³´ê³  ëœ»ê³¼ ìŒì„ ë§íˆì„¸ìš”";
                content.innerHTML = `<div class="question-text">${item.hanja}</div>`;

                choices.forEach(choice => {
                    const btn = document.createElement('button');
                    btn.className = 'choice-btn';
                    btn.innerText = `${choice.meaning} ${choice.sound}`;
                    btn.onclick = () => handleAnswer(choice.hanja === item.hanja, btn);
                    choiceGrid.appendChild(btn);
                });
            } else {
                typeLabel.innerText = "ëœ»ê³¼ ìŒì„ ë³´ê³  í•œìë¥¼ ë§íˆì„¸ìš”";
                content.innerHTML = `<div class="question-hint">${item.meaning} ${item.sound}</div>`;

                choices.forEach(choice => {
                    const btn = document.createElement('button');
                    btn.className = 'choice-btn';
                    btn.style.fontSize = '2rem';
                    btn.innerText = choice.hanja;
                    btn.onclick = () => handleAnswer(choice.hanja === item.hanja, btn);
                    choiceGrid.appendChild(btn);
                });
            }
        }

        function handleAnswer(isCorrect, btn) {
            if (isAnswered) return;
            isAnswered = true;

            const item = currentSession[currentQuestionIndex];
            const feedbackArea = document.getElementById('feedback-area');
            const feedbackStatus = document.getElementById('feedback-status');
            const feedbackExpl = document.getElementById('feedback-explanation');

            feedbackArea.classList.add('active');
            feedbackExpl.innerText = `${item.hanja}: ${item.meaning} ${item.sound}`;

            if (isCorrect) {
                score++;
                btn.classList.add('correct');
                feedbackStatus.innerText = "ì°¸ ì˜í–ˆìŠµë‹ˆë‹¤! ğŸ‘";
                feedbackStatus.style.color = "var(--correct)";
            } else {
                btn.classList.add('wrong');
                wrongAnswers.push(item);
                feedbackStatus.innerText = "ì•„ì‰½ë„¤ìš”. ë‹¤ì‹œ í™•ì¸í•´ ë³´ì„¸ìš”.";
                feedbackStatus.style.color = "var(--wrong)";

                const buttons = document.querySelectorAll('.choice-btn');
                buttons.forEach(b => {
                    if (b.innerText.includes(item.hanja) || b.innerText.includes(item.meaning)) {
                        b.classList.add('correct');
                    }
                });
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentSession.length) {
                renderQuestion();
                document.getElementById('feedback-area').classList.remove('active');
            } else {
                showResults();
            }
        }

        function showResults() {
            showScreen('result-screen');
            document.getElementById('result-score').innerText = `${score} / ${currentSession.length}`;
            document.getElementById('stat-accuracy').innerText = `${Math.round((score / currentSession.length) * 100)}%`;

            const list = document.getElementById('weakness-list');
            const section = document.getElementById('weakness-section');
            list.innerHTML = '';

            if (wrongAnswers.length > 0) {
                section.style.display = 'block';
                wrongAnswers.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'weakness-item';
                    div.innerHTML = `
                        <span class="hanja-large">${item.hanja}</span>
                        <span>${item.meaning} ${item.sound}</span>
                    `;
                    list.appendChild(div);
                });
            } else {
                section.style.display = 'none';
            }

            const stats = JSON.parse(localStorage.getItem('hanja_stats') || '{"sessions": 0, "totalScore": 0}');
            stats.sessions++;
            stats.totalScore += score;
            localStorage.setItem('hanja_stats', JSON.stringify(stats));
        }

        function restartQuiz() {
            startQuiz(0, pool.length);
        }

        window.onload = async () => {
            await loadHanjaData();
        };

    </script>
</body>

</html>